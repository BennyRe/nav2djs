var NAV2D=NAV2D||{REVISION:"1"};NAV2D.Navigator=function(d){var f=this;var d=d||{};var b=d.ros;var h=d.serverName||"/move_base";var a=d.actionName||"move_base_msgs/MoveBaseAction";this.rootObject=d.rootObject||new createjs.Container();if(f.rootObject instanceof createjs.Stage){var c=f.rootObject}else{var c=f.rootObject.getStage()}var g=new ROS2D.NavigationArrow({size:12,strokeSize:1,fillColor:createjs.Graphics.getRGB(255,128,0,0.66)});g.visible=false;this.rootObject.addChild(g);var e=new ROSLIB.Topic({ros:b,name:"/robot_pose",messageType:"geometry_msgs/Pose",throttle_rate:100});e.subscribe(function(i){g.x=i.position.x;g.y=-i.position.y;g.scaleX=1/c.scaleX;g.scaleY=1/c.scaleY;g.rotation=c.rosQuaternionToGlobalTheta(i.orientation);g.visible=true});this.rootObject.addEventListener("dblclick",function(i){var j=c.globalToRos(i.stageX,i.stageY);console.log(j)})};NAV2D.OccupancyGridClientNav=function(c){var d=this;var c=c||{};this.ros=c.ros;var b=c.topic||"/map";var e=c.continuous;this.serverName=c.serverName||"/move_base";this.actionName=c.actionName||"move_base_msgs/MoveBaseAction";this.rootObject=c.rootObject||new createjs.Container();this.viewer=c.viewer;this.navigator=null;var a=new ROS2D.OccupancyGridClient({ros:this.ros,rootObject:this.rootObject,continuous:e});a.on("change",function(){d.navigator=new NAV2D.Navigator({ros:d.ros,serverName:d.serverName,actionName:d.actionName,rootObject:d.rootObject});d.viewer.scaleToDimensions(a.currentGrid.width,a.currentGrid.height)})};